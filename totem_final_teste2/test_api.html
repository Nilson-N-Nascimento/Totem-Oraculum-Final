<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste API Gemini</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        #result { background: #f0f0f0; padding: 15px; margin-top: 20px; border-radius: 5px; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Teste da API Google Gemini</h1>
    <button id="testBtn">Testar API</button>
    <div id="result"></div>

    <script>
        const API_KEY = 'AIzaSyChPB1j0fvfchLhuItW7rMnIB0Oy8Fh6lg';
        
        // Testando diferentes endpoints
        const ENDPOINTS = [
            'https://generativelanguage.googleapis.com/v1/models/gemini-2.0-flash:generateContent',
            'https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent',
            'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent'
        ];

        async function testAPI() {
            const resultDiv = document.getElementById('result');
            resultDiv.innerHTML = '<p>Testando endpoints...</p>';
            
            for (let i = 0; i < ENDPOINTS.length; i++) {
                const endpoint = ENDPOINTS[i];
                resultDiv.innerHTML += `<p><strong>Testando:</strong> ${endpoint}</p>`;
                
                try {
                    const response = await fetch(`${endpoint}?key=${API_KEY}`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            contents: [{
                                parts: [{
                                    text: 'Olá, me fale sobre Belém do Pará'
                                }]
                            }],
                            generationConfig: {
                                maxOutputTokens: 100,
                                temperature: 0.7
                            }
                        })
                    });

                    const responseText = await response.text();
                    
                    if (response.ok) {
                        const data = JSON.parse(responseText);
                        resultDiv.innerHTML += `<p class="success">✅ SUCESSO! Status: ${response.status}</p>`;
                        resultDiv.innerHTML += `<p><strong>Resposta:</strong> ${data.candidates[0].content.parts[0].text}</p><hr>`;
                        break; // Para no primeiro que funcionar
                    } else {
                        resultDiv.innerHTML += `<p class="error">❌ ERRO! Status: ${response.status}</p>`;
                        resultDiv.innerHTML += `<p class="error">Resposta: ${responseText}</p><hr>`;
                    }
                } catch (error) {
                    resultDiv.innerHTML += `<p class="error">❌ ERRO DE REDE: ${error.message}</p><hr>`;
                }
            }
        }

        document.getElementById('testBtn').addEventListener('click', testAPI);
    </script>
</body>
</html>